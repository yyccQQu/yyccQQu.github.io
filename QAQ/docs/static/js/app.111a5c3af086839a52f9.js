webpackJsonp([1],{100:function(t,e,i){i(123);var s=i(14)(i(267),i(115),null,null);t.exports=s.exports},101:function(t,e,i){"use strict";var s=i(59),n=i(125),a=i(107),o=i.n(a),r=i(104),c=i.n(r),l=i(106),u=i.n(l),h=i(105),d=i.n(h);s.a.use(n.a),e.a=new n.a({routes:[{path:"/",name:"qsList",component:o.a},{path:"/data/:num",name:"qsData",component:c.a},{path:"/fill/:num",name:"qsFill",component:u.a},{path:"/edit/:num",name:"qsEdit",component:d.a}]})},104:function(t,e,i){i(120);var s=i(14)(i(268),i(112),"data-v-1daaaa2e",null);t.exports=s.exports},105:function(t,e,i){i(119);var s=i(14)(i(269),i(111),"data-v-1284f88e",null);t.exports=s.exports},106:function(t,e,i){i(124);var s=i(14)(i(270),i(116),"data-v-f0d9c8f2",null);t.exports=s.exports},107:function(t,e,i){i(118);var s=i(14)(i(271),i(110),"data-v-033cd122",null);t.exports=s.exports},108:function(t,e,i){i(122);var s=i(14)(i(272),i(114),null,null);t.exports=s.exports},109:function(t,e,i){i(121);var s=i(14)(i(273),i(113),"data-v-3b20eaec",null);t.exports=s.exports},110:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qs-list"},[0!=t.qsList.length?i("ul",[i("li"),t._v(" "),i("li",[t._v("标题")]),t._v(" "),i("li",[t._v("截止时间")]),t._v(" "),i("li",[t._v("状态")]),t._v(" "),i("li",[t._v("操作"),i("span",{on:{click:function(e){t.$router.push({name:"qsEdit",params:{num:0}})}}},[t._v("+新建问卷")])])]):t._e(),t._v(" "),t._l(t.qsList,function(e){return[i("ul",[i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{__c:function(i){var s=e.checked,n=i.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);a?o<0&&(e.checked=s.concat(null)):o>-1&&(e.checked=s.slice(0,o).concat(s.slice(o+1)))}else e.checked=a}}})]),t._v(" "),i("li",[t._v(t._s(e.title))]),t._v(" "),i("li",[t._v(t._s(e.time))]),t._v(" "),i("li",{class:"inissue"===e.state?"inissue":""},[t._v(t._s(e.stateTitle))]),t._v(" "),i("li",[i("button",{on:{click:function(i){t.iterator=t.edit(e),t.iterator.next()}}},[t._v("编辑")]),t._v(" "),i("button",{on:{click:function(i){t.iterator=t.delItem(e.num),t.iterator.next()}}},[t._v("删除")]),t._v(" "),i("router-link",{attrs:{to:"/fill/"+e.num,tag:"button"}},[t._v("查看问卷")]),t._v(" "),i("button",{on:{click:function(i){t.iterator=t.watchData(e),t.iterator.next()}}},[t._v("查看数据")])],1)])]}),t._v(" "),0!=t.qsList.length?i("div",{staticClass:"list-bottom"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],attrs:{type:"checkbox",id:"all-check"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{__c:function(e){var i=t.selectAll,s=e.target,n=!!s.checked;if(Array.isArray(i)){var a=t._i(i,null);n?a<0&&(t.selectAll=i.concat(null)):a>-1&&(t.selectAll=i.slice(0,a).concat(i.slice(a+1)))}else t.selectAll=n}}}),t._v("全选")]),t._v(" "),i("button",{on:{click:function(e){t.iterator=t.delItems(),t.iterator.next()}}},[t._v("删除")])]):t._e(),t._v(" "),0===t.qsList.length?i("div",{staticClass:"add-qs"},[i("button",{staticClass:"add-btn",on:{click:function(e){t.$router.push({name:"qsEdit",params:{num:0}})}}},[t._v("+  新建问卷")])]):t._e(),t._v(" "),t.showDialog?i("div",{staticClass:"shadow"},[i("div",{staticClass:"del-dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:function(e){t.showDialog=!1}}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))]),t._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"yes",on:{click:function(e){t.iterator.next()}}},[t._v("确定")]),t._v(" "),i("button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取消")])])])]):t._e()],2)},staticRenderFns:[]}},111:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-container"},[t.titleChange?t._e():i("h2",{on:{click:t.titleClick}},[t._v(t._s(t.qsItem.title))]),t._v(" "),t.titleChange?i("input",{directives:[{name:"model",rawName:"v-model",value:t.titleValue,expression:"titleValue"}],ref:"titleInput",attrs:{type:"text",name:"qsTitle"},domProps:{value:t.titleValue},on:{blur:t.onblur,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.onsubmit(e)},input:function(e){e.target.composing||(t.titleValue=e.target.value)}}}):t._e(),t._v(" "),i("div",{staticClass:"content"},[t._l(t.qsItem.question,function(e,s){return i("div",{staticClass:"questions"},[i("div",{staticClass:"qs-left"},[i("p",{staticClass:"qs-title"},[t._v("\n          "+t._s(e.num)+" "+t._s(e.title)+" "+t._s(t.getMsg(e))+"\n        ")]),t._v(" "),t._l(e.options,function(s){return i("p",{staticClass:"option"},[i("label",["radio"===e.type?i("input",{attrs:{type:"radio",name:e.num+"-"+e.title}}):t._e(),t._v(" "),"checkbox"===e.type?i("input",{attrs:{type:"checkbox",name:e.num+"-"+e.title}}):t._e(),t._v(t._s(s)+"\n          ")])])}),t._v(" "),"textarea"===e.type?i("textarea"):t._e()],2),t._v(" "),i("div",{staticClass:"qs-right"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.isNeed,expression:"qs.isNeed"}],attrs:{type:"checkbox"},domProps:{value:e.isNeed,checked:Array.isArray(e.isNeed)?t._i(e.isNeed,e.isNeed)>-1:e.isNeed},on:{__c:function(i){var s=e.isNeed,n=i.target,a=!!n.checked;if(Array.isArray(s)){var o=e.isNeed,r=t._i(s,o);a?r<0&&(e.isNeed=s.concat(o)):r>-1&&(e.isNeed=s.slice(0,r).concat(s.slice(r+1)))}else e.isNeed=a}}}),t._v("\n        此题是否必填")]),t._v(" "),i("p",[0!==s?i("span",{on:{click:function(e){t.goUp(s)}}},[t._v("上移")]):t._e(),t._v(" "),s!==t.qsItem.question.length-1?i("span",{on:{click:function(e){t.goDown(s)}}},[t._v("下移")]):t._e(),t._v(" "),i("span",{on:{click:function(i){t.copy(s,e)}}},[t._v("复用")]),t._v(" "),i("span",{on:{click:function(e){t.del(s)}}},[t._v("删除")])])])])}),t._v(" "),i("div",{staticClass:"add"},[i("transition",{attrs:{name:"slide"}},[t.showBtn?i("div",{staticClass:"add-option"},[i("button",{on:{click:t.addRadio}},[t._v("单选")]),t._v(" "),i("button",{on:{click:t.addCheckbox}},[t._v("多选")]),t._v(" "),i("button",{on:{click:t.addTextarea}},[t._v("文本框")])]):t._e()]),t._v(" "),i("div",{staticClass:"add-item",on:{click:t.addItemClick}},[i("span",{staticClass:"add-icon"},[t._v("+")]),i("span",[t._v("添加问题")])])],1)],2),t._v(" "),t.showAddQsDialog?i("div",{staticClass:"shadow"},[i("div",{staticClass:"add-qs-dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:function(e){t.showAddQsDialog=!1}}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))]),t._v(" "),i("label",[t._v("输入题目标题"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.qsInputTitle,expression:"qsInputTitle"}],attrs:{type:"text"},domProps:{value:t.qsInputTitle},on:{input:function(e){e.target.composing||(t.qsInputTitle=e.target.value)}}})]),t._v(" "),t.showAddOptionInput?i("label",[t._v("输入选项"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.qsInputOptions,expression:"qsInputOptions"}],attrs:{type:"text"},domProps:{value:t.qsInputOptions},on:{input:function(e){e.target.composing||(t.qsInputOptions=e.target.value)}}})]):t._e(),t._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"yes",on:{click:t.validateAddQs}},[t._v("确定")]),t._v(" "),i("button",{on:{click:function(e){t.showAddQsDialog=!1}}},[t._v("取消")])])])]):t._e(),t._v(" "),t.showDialog?i("div",{staticClass:"shadow"},[i("div",{staticClass:"dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:t.cancel}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))]),t._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"yes",on:{click:function(e){t.iterator.next()}}},[t._v("确定")]),t._v(" "),i("button",{on:{click:t.cancel}},[t._v("取消")])])])]):t._e(),t._v(" "),i("footer",[i("span",[t._v("问卷截止日期")]),t._v(" "),i("calendar-input",{attrs:{showCalendar:!1,limit:t.limit},on:{getValue:t.getValue}}),t._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"save",on:{click:function(e){t.iterator=t.save(),t.iterator.next()}}},[t._v("保存问卷")]),t._v(" "),i("button",{staticClass:"issue",on:{click:function(e){t.iterator=t.issueQs(),t.iterator.next()}}},[t._v("发布问卷")])])],1)])},staticRenderFns:[]}},112:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"data-container"},[t.isError?t._e():[i("span",{staticClass:"back",on:{click:function(e){t.goBack()}}},[t._v("< 返回")]),t._v(" "),i("h2",[t._v(t._s(t.qsItem.title))]),t._v(" "),i("p",[t._v("此统计分析只包含完整回收的数据(数据皆为自制数据模拟来mock数据)")])],t._v(" "),t.isError?t._e():i("div",{staticClass:"content"},[t._l(t.qsItem.question,function(e,s){return[i("div",{staticClass:"content-item"},[i("div",{staticClass:"item-left"},[i("p",[t._v(t._s(e.num)+"   "+t._s(e.title))]),t._v(" "),t._l(e.options,function(e){return i("p",{staticClass:"option"},[t._v(t._s(e))])})],2),t._v(" "),"radio"===e.type?i("div",{staticClass:"item-right"},[i("p",[t._v("数据占比")]),t._v(" "),t._l(e.options,function(s,n){return[i("div",{staticClass:"progress-bar"},["0%"!==t.renderProgressMath(e.options.length,n)?i("div",{staticClass:"bar-inner",style:{width:t.renderProgressMath(e.options.length,n)}}):t._e()]),t._v(" "),i("span",{staticClass:"percent"},[t._v(t._s(t.renderProgressMath(e.options.length,n)))])]})],2):"textarea"===e.type?i("div",{staticClass:"item-right"},[i("p",[t._v("有效回答占比")]),t._v(" "),i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"bar-inner",style:{width:"85%"}})]),t._v(" "),i("span",{staticClass:"percent"},[t._v("85%")])]):i("div",{staticClass:"item-right"},[i("p",[t._v("数据占比")]),t._v(" "),i("div",{attrs:{id:"chart-"+e.num}})])])]})],2),t._v(" "),t.isError?i("div",{staticClass:"error"},[t._v("\n    404 Not Found\n  ")]):t._e()],2)},staticRenderFns:[]}},113:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("router-link",{attrs:{to:"/"}},[t._v("问卷管理")]),t._v(" "),i("router-link",{attrs:{to:"/"}},[t._v("我的问卷")])],1)},staticRenderFns:[]}},114:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"calendar-input-container orange-theme",style:t.containerStyle},[i("label",{attrs:{for:"calendar-input"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectValue,expression:"selectValue"}],ref:"mainInput",staticClass:"calendar-input",class:{focus:t.isfocus},attrs:{type:"text",readonly:"readonly"},domProps:{value:t.selectValue},on:{click:t.focus,input:function(e){e.target.composing||(t.selectValue=e.target.value)}}})]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.changeShowCalendar,expression:"changeShowCalendar"}],attrs:{id:"calendar"}},[i("div",{attrs:{id:"calendar-header"}},[i("span",{staticClass:"arrow",on:{click:t.subMonth}},[t._v("<")]),t._v(" "),i("span",{attrs:{id:"date-box"}},[t._v("\n          "+t._s(t.trueSelectYear)+"年"+t._s(t.trueSelectMonth)+"月\n        ")]),t._v(" "),i("span",{staticClass:"arrow",on:{click:t.addMonth}},[t._v(">")])]),t._v(" "),i("div",{staticClass:"week"},t._l(t.week,function(e,s){return i("span",{class:{weekend:0===s||6===s}},[t._v("\n          "+t._s(e)+"\n        ")])})),t._v(" "),i("div",{staticClass:"days"},t._l(t.renderData,function(e,s){return i("span",{class:{weekend:s%7==0||s%7==6,unselect:t.unselectArr.includes(s),select:s===t.firstDayInWeek+t.trueSelectDay-1},on:{click:function(e){t.changeSelectDay(s)}}},[t._v("\n          "+t._s(e)+"\n        ")])}))])])],1)},staticRenderFns:[]}},115:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-header"),t._v(" "),i("router-view")],1)},staticRenderFns:[]}},116:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fill-container"},[t.isError?i("div",{staticClass:"error"},[t._v("\n    404 Not Found\n  ")]):i("div",{staticClass:"fill"},[i("router-link",{staticClass:"back",attrs:{to:"/",tag:"span"}},[t._v("< 返回")]),t._v(" "),i("h2",[t._v(t._s(t.qsItem.title))]),t._v(" "),i("div",{staticClass:"content"},t._l(t.qsItem.question,function(e){return i("div",{staticClass:"content-item"},[i("p",{staticClass:"qs-title"},[t._v("\n          "+t._s(e.num)+" "+t._s(e.title)+" "+t._s(t.getMsg(e))+"\n        ")]),t._v(" "),t._l(e.options,function(s){return i("p",{staticClass:"option"},[i("label",["radio"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.requiredItem[e.num],expression:"requiredItem[item.num]"}],attrs:{type:"radio",name:e.num+"-"+e.title},domProps:{value:s,checked:t._q(t.requiredItem[e.num],s)},on:{__c:function(i){var n=t.requiredItem,a=e.num;Array.isArray(n)?n.splice(a,1,s):t.requiredItem[e.num]=s}}}):t._e(),t._v(" "),"checkbox"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.requiredItem[e.num],expression:"requiredItem[item.num]"}],attrs:{type:"checkbox",name:e.num+"-"+e.title},domProps:{value:s,checked:Array.isArray(t.requiredItem[e.num])?t._i(t.requiredItem[e.num],s)>-1:t.requiredItem[e.num]},on:{__c:function(i){var n=t.requiredItem[e.num],a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=s,c=t._i(n,r);o?c<0&&(t.requiredItem[e.num]=n.concat(r)):c>-1&&(t.requiredItem[e.num]=n.slice(0,c).concat(n.slice(c+1)))}else t.requiredItem[e.num]=o}}}):t._e(),t._v(t._s(s)+"\n          ")])])}),t._v(" "),"textarea"===e.type?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.requiredItem[e.num],expression:"requiredItem[item.num]"}],domProps:{value:t.requiredItem[e.num]},on:{input:function(i){if(!i.target.composing){var s=t.requiredItem,n=e.num;Array.isArray(s)?s.splice(n,1,i.target.value):t.requiredItem[e.num]=i.target.value}}}}):t._e()],2)})),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.showDialog?i("div",{staticClass:"dialog"},[t.submitError?i("div",{staticClass:"submit-dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:function(e){t.showDialog=!1}}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))]),t._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"yes",on:{click:function(e){t.showDialog=!1}}},[t._v("确定")]),t._v(" "),i("button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取消")])])]):i("div",{staticClass:"submit-dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:function(e){t.showDialog=!1}}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))])])]):t._e()]),t._v(" "),i("footer",[i("button",{staticClass:"submit",on:{click:t.submit}},[t._v("提交")])])],1)])},staticRenderFns:[]}},118:function(t,e){},119:function(t,e){},120:function(t,e){},121:function(t,e){},122:function(t,e){},123:function(t,e){},124:function(t,e){},267:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(109),n=i.n(s);e.default={name:"app",components:{vHeader:n.a}}},268:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(38),n=i(1),a=i.n(n),o=i(201),r=(i.n(o),i(235)),c=(i.n(r),i(227));i.n(c);e.default={name:"qsData",data:function(){return{qsItem:{},qsList:s.a.get(),isError:!1,chartData:[],chartNum:[]}},created:function(){this.fetchData()},mounted:function(){var t=this;this.renderChartData(),this.chartNum.forEach(function(e,i){t.renderEChart(e,t.chartData[i])})},methods:{fetchData:function(){for(var t=0,e=this.qsList.length;t<e;t++)if(this.qsList[t].num==this.$route.params.num){this.qsItem=this.qsList[t];break}t===this.qsList.length&&(this.isError=!0)},renderProgressMath:function(t,e){return t<2?"100%":t>=2?0===e?"85%":1===e?"15%":"0%":void 0},renderChartData:function(){var t=this;this.qsItem.question.forEach(function(e){if("checkbox"===e.type){var i=0,s=0,n=[],a=e.options.length;t.chartNum.push(e.num),e.options.forEach(function(t,e){e==a-1?i=1e3-s:(i=Math.floor(Math.random()*(1001-s)),s+=i),n.push({value:i,name:t})}),t.chartData.push(n)}})},renderEChart:function(t,e){var i=a.a.init(document.getElementById("chart-"+t)),s={tooltip:{trigger:"item",formatter:"{a} <br/>{b}选择人次 : {c} ({d}%)"},series:[{name:"数据占比",type:"pie",radius:"55%",center:["50%","60%"],data:e}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},n=-1;setInterval(function(){var t=s.series[0].data.length;i.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:n}),n=(n+1)%t,i.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:n}),i.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:n})},1e3),i.setOption(s)},goBack:function(){this.$router.push({path:"/"})}},watch:{$route:"fetchData"}}},269:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(99),n=i.n(s),a=i(265),o=i.n(a),r=i(98),c=i.n(r),l=i(38),u=i(108),h=i.n(u);e.default={name:"qsEdit",components:{calendarInput:h.a},data:function(){return{qsItem:{},qsList:l.a.get(),isError:!1,showBtn:!1,titleChange:!1,titleValue:"",showAddQsDialog:!1,showAddOptionInput:!0,qsInputTitle:"",qsInputOptions:[],info:"",selectTime:"",addOptionType:"",limit:{},showDialog:!1,iterator:{},isGoIndex:!1}},beforeRouteEnter:function(t,e,i){var s=t.params.num,n={};if(0!=s){var a=l.a.get().length;if(s<0||s>a)alert("非法路由!"),i("/");else for(var o=0;o<a;o++)if(l.a.get()[o].num==s){n=l.a.get()[o];break}"noissue"===n.state?i():(alert("非法路由"),i("/"))}else i()},created:function(){this.fetchData()},methods:{fetchData:function(){if(this.limit={minYear:(new Date).getFullYear(),minMonth:(new Date).getMonth()+1,minDay:(new Date).getDate(),maxYear:2030,maxMonth:3,maxDay:20},0==this.$route.params.num){var t={};t.num=this.qsList.length+1,t.title="这里是标题",t.time="",t.state="noissue",t.question=[],t.stateTitle="未发布",t.checked=!1,this.qsItem=t,this.qsList.push(this.qsItem)}else{for(var e=0,i=this.qsList.length;e<i;e++)if(this.qsList[e].num==this.$route.params.num){this.qsItem=this.qsList[e];break}e===this.qsList.length&&(this.isError=!0)}},getMsg:function(t){var e="";return e="radio"===t.type?"(单选题)":"checkbox"===t.type?"(多选题)":"(文本题)",t.isNeed?e+" *":e},onblur:function(){this.titleValue=this.titleValue.trim(),this.qsItem.title=""===this.titleValue?this.qsItem.title:this.titleValue,this.titleChange=!1},onsubmit:function(){this.titleValue=this.titleValue.trim(),this.qsItem.title=""===this.titleValue?this.qsItem.title:this.titleValue,this.titleChange=!1},titleClick:function(){var t=this;this.titleChange=!this.titleChange,setTimeout(function(){t.$refs.titleInput.focus()},150)},swapItems:function(t,e){var i=this.qsItem.question.splice(e,1,this.qsItem.question[t]),s=c()(i,1),n=s[0];this.qsItem.question.splice(t,1,n)},goUp:function(t){this.swapItems(t,t-1)},goDown:function(t){this.swapItems(t,t+1)},copy:function(t,e){if(10===this.questionLength)return alert("问卷已满！");e=o()({},e),this.qsItem.question.splice(t,0,e)},del:function(t){this.qsItem.question.splice(t,1)},addItemClick:function(){!1===this.showBtn&&10===this.questionLength?alert("问卷已满！"):this.showBtn=!this.showBtn},showAddDialog:function(t,e){this.showAddQsDialog=!0,this.showAddOptionInput=e,this.info=t,this.qsInputTitle="",this.qsInputOptions=""},addRadio:function(){if(10===this.questionLength)return alert("问卷已满！");this.showAddDialog('分别在下面的输入框中输入问题的名称以及选项, 选项用半角逗号","分隔开',!0),this.addOptionType="radio"},addCheckbox:function(){if(10===this.questionLength)return alert("问卷已满！");this.showAddDialog('分别在下面的输入框中输入问题的名称以及选项, 选项用半角逗号","分隔开',!0),this.addOptionType="checkbox"},addTextarea:function(){if(10===this.questionLength)return alert("问卷已满！");this.showAddDialog("在输入框中输入问题名称",!1),this.addOptionType="textarea"},validateAddQs:function(){var t=this.qsInputTitle.trim();if(""===t)return alert("题目不能为空");if(this.showAddOptionInput){var e=this.qsInputOptions.trim();if(""===e)return alert("选项不能为空！");e=e.split(",");for(var i=0,s=e.length;i<s;i++)if(""===e[i].trim())return alert("存在某个选项内容为空");this.qsItem.question.push({num:this.qsItem.question.length-1,title:t,type:this.addOptionType,isNeed:!0,options:e}),this.showAddQsDialog=!1}else this.qsItem.question.push({num:this.qsItem.question.length-1,title:t,type:"textarea",isNeed:!0}),this.showAddQsDialog=!1},getValue:function(t){this.selectTime=t,this.qsItem.time=this.selectTime},save:n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.showDialog=!0,this.info="确认保存?",void(t.next=4);case 4:return 0===this.qsItem.question.length?(this.showDialog=!1,alert("问卷为空无法保存")):(l.a.save(this.qsList),this.info="是否发布?",this.isGoIndex=!0),void(t.next=7);case 7:this.qsItem.state="inissue",this.qsItem.stateTitle="发布中",l.a.save(this.qsList),this.showDialog=!1,this.$router.push({path:"/"});case 12:case"end":return t.stop()}},t,this)}),issueQs:n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.showDialog=!0,this.info="确认发布?",void(t.next=4);case 4:0===this.qsItem.question.length?(this.showDialog=!1,alert("问卷为空无法保存")):(this.qsItem.state="inissue",this.qsItem.stateTitle="发布中",l.a.save(this.qsList),this.showDialog=!1,this.$router.push({path:"/"}));case 5:case"end":return t.stop()}},t,this)}),cancel:function(){this.showDialog=!1,!0===this.isGoIndex&&this.$router.push({path:"/"})}},computed:{questionLength:function(){return this.qsItem.question.length}},watch:{$route:"fetchData",qsItem:{handler:function(t){t.question.forEach(function(t,e){t.num="Q"+(e+1)})},deep:!0}}}},270:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(38);e.default={name:"qsFill",data:function(){return{qsItem:[],qsList:s.a.get(),isError:!1,showDialog:!1,info:"",submitError:!1,requiredItem:{}}},created:function(){this.fetchData()},mounted:function(){this.getRequiredItem()},methods:{fetchData:function(){for(var t=0,e=this.qsList.length;t<e;t++)if(this.qsList[t].num==this.$route.params.num){this.qsItem=this.qsList[t];break}t===this.qsList.length&&(this.isError=!0)},getMsg:function(t){var e="";return e="radio"===t.type?"(单选题)":"checkbox"===t.type?"(多选题)":"(文本题)",t.isNeed?e+" *":e},submit:function(){var t=this;if("inissue"===this.qsItem.state){this.validate()?(this.showDialog=!0,this.submitError=!1,this.info="提交成功！",setTimeout(function(){t.showDialog=!1},500),setTimeout(function(){t.$router.push({path:"/"})},1500)):(this.showDialog=!0,this.submitError=!0,this.info="提交失败！ 存在必填项未填")}else this.showDialog=!0,this.submitError=!0,this.info="提交失败！ 只有发布中的问卷才能提交"},getRequiredItem:function(){var t=this;this.qsItem.question.forEach(function(e){e.isNeed&&e.isNeed&&("checkbox"===e.type?t.requiredItem[e.num]=[]:t.requiredItem[e.num]="")})},validate:function(){for(var t in this.requiredItem)if(0===this.requiredItem[t].length)return!1;return!0}},watch:{$route:"fetchData"}}},271:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(99),n=i.n(s),a=i(98),o=i.n(a),r=i(38);e.default={name:"qsList",data:function(){return{qsList:[],showDialog:!1,iterator:{},info:""}},mounted:function(){null!==r.a.get()?(this.qsList=r.a.get(),this.qsList.forEach(function(t){var e=t.time.split("-"),i=o()(e,3),s=i[0],n=i[1],a=i[2];s<(new Date).getFullYear()?(t.state="issueed",t.stateTitle="已发布"):s==(new Date).getFullYear()&&n<(new Date).getMonth()+1?(t.state="issueed",t.stateTitle="已发布"):s==(new Date).getFullYear()&&n==(new Date).getMonth()+1&&a<(new Date).getDate()&&(t.state="issueed",t.stateTitle="已发布")})):(r.a.save([{num:1,title:"第一份问卷",time:"2030-1-1",state:"inissue",stateTitle:"发布中",checked:!1,question:[{num:"Q1",title:"单选题",type:"radio",isNeed:!0,options:["选项一","选项二"]},{num:"Q2",title:"多选题",type:"checkbox",isNeed:!0,options:["选项一","选项二","选项三","选项四"]},{num:"Q3",title:"文本题",type:"textarea",isNeed:!0}]},{num:2,title:"第二份问卷",time:"2030-1-1",state:"noissue",stateTitle:"未发布",checked:!1,question:[{num:"Q1",title:"单选题",type:"radio",isNeed:!0,options:["选项一","选项二"]},{num:"Q2",title:"多选题",type:"checkbox",isNeed:!0,options:["选项一","选项二","选项三","选项四"]},{num:"Q3",title:"文本题",type:"textarea",isNeed:!0}]},{num:3,title:"第三份问卷",time:"2017-3-27",state:"issueed",stateTitle:"已发布",checked:!1,question:[{num:"Q1",title:"单选题",type:"radio",isNeed:!0,options:["选项一","选项二"]},{num:"Q2",title:"多选题",type:"checkbox",isNeed:!0,options:["选项一","选项二","选项三","选项四"]},{num:"Q3",title:"文本题",type:"textarea",isNeed:!0}]}]),this.qsList=r.a.get())},methods:{showDialogMsg:function(t){this.showDialog=!0,this.info=t},delItem:n.a.mark(function t(e){var i=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showDialogMsg("确认要删除此问卷");case 2:return t.next=4,function(){for(var t=0,s=i.qsList.length;t<s&&i.qsList[t].num!==e;t++);i.qsList.splice(t,1),i.showDialog=!1}();case 4:case"end":return t.stop()}},t,this)}),delItems:n.a.mark(function t(){var e=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showDialogMsg("确认要删除选中的问卷？");case 2:return t.next=4,function(){if(e.showDialog=!1,e.selectAll)return void(e.qsList=[]);e.selectGroup!=[]&&e.selectGroup.forEach(function(t){e.qsList.indexOf(t)>-1&&e.qsList.splice(e.qsList.indexOf(t),1)})}();case 4:case"end":return t.stop()}},t,this)}),edit:n.a.mark(function t(e){var i=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){"noissue"===e.state?i.showDialogMsg("确认要编辑？"):i.showDialogMsg("只有未发布的问卷才能编辑")}();case 2:return t.next=4,function(){"noissue"!==e.state?i.showDialog=!1:(i.showDialog=!1,i.$router.push({name:"qsEdit",params:{num:e.num}}))}();case 4:case"end":return t.stop()}},t,this)}),watchData:n.a.mark(function t(e){var i=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){"noissue"===e.state?i.showDialogMsg("未发布的问卷无数据可查看"):i.$router.push({name:"qsData",params:{num:e.num}})}();case 2:return t.next=4,this.showDialog=!1;case 4:case"end":return t.stop()}},t,this)})},computed:{selectAll:{get:function(){return this.selectCount===this.qsList.length&&0!==this.selectCount},set:function(t){return this.qsList.forEach(function(e){e.checked=t}),t}},selectCount:function(){var t=0;return this.qsList.forEach(function(e){e.checked&&t++}),t},selectGroup:function(){var t=[];return this.qsList.forEach(function(e){e.checked&&t.push(e)}),t}},watch:{qsList:{handler:function(t){t.forEach(function(t,e){t.num=e+1}),r.a.save(t)},deep:!0}}}},272:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(266),n=i.n(s);e.default={name:"calendar-input",props:{show:{type:Boolean,default:!0},limit:{type:Object,default:function(){return{minYear:1900,minMonth:1,minDay:1,maxYear:2030,maxMonth:3,maxDay:20}}},showCalendar:{type:Boolean,default:!0},containerStyle:{type:Object}},data:function(){return{isfocus:!1,changeShowCalendar:this.showCalendar,week:["日","一","二","三","四","五","六"],date:new Date,selectYear:(new Date).getFullYear(),selectMonth:(new Date).getMonth()+1,selectDay:(new Date).getDate()}},methods:{focus:function(){this.isfocus=!this.isfocus,this.changeShowCalendar=!this.changeShowCalendar},subMonth:function(){1===this.selectMonth?(this.selectMonth=12,this.selectYear-=1):this.selectMonth-=1,this.selectYear<this.limit.minYear&&(this.selectYear=this.limit.minYear),this.selectYear===this.limit.minYear&&this.selectMonth<=this.limit.minMonth&&(this.selectMonth=this.limit.minMonth)},addMonth:function(){12===this.selectMonth?(this.selectMonth=1,this.selectYear+=1):this.selectMonth+=1,this.selectYear>this.limit.maxYear&&(this.selectYear=this.limit.maxYear),this.selectYear===this.limit.maxYear&&this.selectMonth>=this.limit.maxMonth&&(this.selectMonth=this.limit.maxMonth)},changeSelectDay:function(t){if(this.unselectArr.includes(t))return!1;this.selectDay=t-this.firstDayInWeek+1}},computed:{trueSelectYear:function(){return this.selectYear<this.limit.minYear?this.limit.minYear:this.selectYear>this.limit.maxYear?this.limit.maxYear:this.selectYear},trueSelectMonth:function(){return this.selectYear===this.limit.minYear&&this.selectMonth<this.limit.minMonth?this.limit.minMonth:this.selectYear===this.limit.maxYear&&this.selectMonth>this.limit.maxMonth?this.limit.maxMonth:this.selectMonth},trueSelectDay:function(){return this.selectYear===this.limit.minYear&&this.selectMonth===this.limit.minMonth&&this.selectDay<this.limit.minDay?this.limit.minDay:this.selectYear===this.limit.maxYear&&this.selectMonth===this.limit.maxMonth&&this.selectDay>this.limit.maxDay?this.limit.maxDay:this.selectDay>this.dayCount?this.dayCount:this.selectDay},selectValue:function(){return this.trueSelectYear+"-"+this.trueSelectMonth+"-"+this.trueSelectDay},firstDayInWeek:function(){return new Date(this.trueSelectYear,this.trueSelectMonth-1,1).getDay()},dayCount:function(){return new Date(this.trueSelectYear,this.trueSelectMonth,0).getDate()},lastMonthDay:function(){var t=this.firstDayInWeek,e=[];if(0===t)return e;for(var i=0,s=new Date(this.trueSelectYear,this.trueSelectMonth-1,0).getDate();i<t;i++)e.unshift(s),s--;return e},nextMonthDay:function(){var t=42-this.firstDayInWeek-this.dayCount,e=[];if(0===t)return e;for(var i=1;i<=t;i++)e.push(i);return e},renderData:function(){for(var t=[],e=1;e<=this.dayCount;e++)t.push(e);return[].concat(n()(this.lastMonthDay),t,n()(this.nextMonthDay))},unselectArr:function(){var t=0,e=[];if(this.trueSelectYear===this.limit.minYear&&this.trueSelectMonth===this.limit.minMonth)for(;t<this.firstDayInWeek+this.limit.minDay-1;t++)e.push(t);else for(;t<this.firstDayInWeek;t++)e.push(t);if(this.trueSelectYear===this.limit.maxYear&&this.trueSelectMonth===this.limit.maxMonth)for(t=this.firstDayInWeek+this.limit.maxDay;t<42;t++)e.push(t);else for(t=this.firstDayInWeek+this.dayCount;t<42;t++)e.push(t);return e}},watch:{selectValue:function(t){this.$emit("getValue",t)}},mounted:function(){this.$emit("getValue",this.selectValue)}}},273:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"header"}},274:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(59),n=i(100),a=i.n(n),o=i(101);s.a.config.productionTip=!1,new s.a({el:"#app",router:o.a,template:"<App/>",components:{App:a.a}})},38:function(t,e,i){"use strict";var s=i(264),n=i.n(s);e.a={get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"questionnaire";return JSON.parse(window.localStorage.getItem(t))},save:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"questionnaire";window.localStorage.setItem(e,n()(t))}}}},[274]);
//# sourceMappingURL=app.111a5c3af086839a52f9.js.map